# typed: false
# frozen_string_literal: true

# This file was generated by GoReleaser. DO NOT EDIT.
class Kommit < Formula
  desc "Therapeutic approach to git commits with AI-generated messages"
  homepage "https://github.com/cowboy-bebug/kommit"
  version "0.3.0"
  license "MIT"

  depends_on "git"
  depends_on "go" => "^1.24"

  on_macos do
    if Hardware::CPU.intel?
      url "https://github.com/cowboy-bebug/kommit/releases/download/v0.3.0/kommit_v0.3.0_darwin_amd64.tar.gz"
      sha256 "acea6de9b66a9dd9658877d69278af9f8933693e762f98d837b99d1b02a1fb15"

      def install
        bin.install "git-kommit"
      end
    end
    if Hardware::CPU.arm?
      url "https://github.com/cowboy-bebug/kommit/releases/download/v0.3.0/kommit_v0.3.0_darwin_arm64.tar.gz"
      sha256 "2e566cf29f712249415da3bd08490ca9818234e904969d4154f1556166054415"

      def install
        bin.install "git-kommit"
      end
    end
  end

  on_linux do
    if Hardware::CPU.intel?
      if Hardware::CPU.is_64_bit?
        url "https://github.com/cowboy-bebug/kommit/releases/download/v0.3.0/kommit_v0.3.0_linux_amd64.tar.gz"
        sha256 "bc5b47bc39185497bf14fefe8160c75db6c1948755589d9e98a8e20f7537c857"

        def install
          bin.install "git-kommit"
        end
      end
    end
    if Hardware::CPU.arm?
      if Hardware::CPU.is_64_bit?
        url "https://github.com/cowboy-bebug/kommit/releases/download/v0.3.0/kommit_v0.3.0_linux_arm64.tar.gz"
        sha256 "ab81066d96b044933f4527b68a3524cffcff6ef55e111de5813815f8b47f37f7"

        def install
          bin.install "git-kommit"
        end
      end
    end
  end

  def caveats
    <<~EOS
      🧐 Your therapist is ready for session!

      To begin your repository's healing journey:
        git kommit init

      Remember to set your OpenAI API key:
        export OPENAI_API_KEY=your_openai_api_key

      Or use a dedicated key for Kommit:
        export KOMMIT_API_KEY=your_kommit_specific_key
    EOS
  end

  test do
    system "#{bin}/git", "kommit", "version"
  end
end

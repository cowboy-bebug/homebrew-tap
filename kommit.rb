# typed: false
# frozen_string_literal: true

# This file was generated by GoReleaser. DO NOT EDIT.
class Kommit < Formula
  desc "Therapeutic approach to git commits with AI-generated messages"
  homepage "https://github.com/cowboy-bebug/kommit"
  version "0.2.1"
  license "MIT"

  depends_on "git"
  depends_on "go" => "^1.24"

  on_macos do
    if Hardware::CPU.intel?
      url "https://github.com/cowboy-bebug/kommit/releases/download/v0.2.1/kommit_v0.2.1_darwin_amd64.tar.gz"
      sha256 "921be5c3336cd3768d734b4716d29bb2d91c72defce0c256ccc4f811d1130b76"

      def install
        bin.install "git-kommit"
      end
    end
    if Hardware::CPU.arm?
      url "https://github.com/cowboy-bebug/kommit/releases/download/v0.2.1/kommit_v0.2.1_darwin_arm64.tar.gz"
      sha256 "43e53f606107e193ece044ac8f97e5f99d9f3d9f9944d1906e3ef569935b9a2d"

      def install
        bin.install "git-kommit"
      end
    end
  end

  on_linux do
    if Hardware::CPU.intel?
      if Hardware::CPU.is_64_bit?
        url "https://github.com/cowboy-bebug/kommit/releases/download/v0.2.1/kommit_v0.2.1_linux_amd64.tar.gz"
        sha256 "b220ceb96eed1291c9e8b593ba3fdcbc92d0ae083f3f5e231a1a471c91d6d8d0"

        def install
          bin.install "git-kommit"
        end
      end
    end
    if Hardware::CPU.arm?
      if Hardware::CPU.is_64_bit?
        url "https://github.com/cowboy-bebug/kommit/releases/download/v0.2.1/kommit_v0.2.1_linux_arm64.tar.gz"
        sha256 "12b286703b2fcc1532d0cc4102b0e9562c78edae794bd6661e358790921f9d59"

        def install
          bin.install "git-kommit"
        end
      end
    end
  end

  def caveats
    <<~EOS
      🧐 Your therapist is ready for session!

      To begin your repository's healing journey:
        git kommit init

      Remember to set your OpenAI API key:
        export OPENAI_API_KEY=your_openai_api_key

      Or use a dedicated key for Kommit:
        export KOMMIT_API_KEY=your_kommit_specific_key
    EOS
  end

  test do
    system "#{bin}/git", "kommit", "version"
  end
end
